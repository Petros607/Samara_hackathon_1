# Капи*bbb*ара
## Описание проекта

**Капи*bbb*ара** — это веб-сервис, предназначенный для автоматического создания структурированных конспектов лекций на основе записей с платформы BigBlueButton (BBB). Сервис использует передовые ИИ-технологии для обработки аудиодорожки записи, выделения ключевых моментов и формирования готового документа в формате PDF. 

Результатом работы сервиса является PDF-файл, содержащий:
- **Аннотацию лекции**: краткое содержание.
- **Протокол лекции по времени**: транскрипция лекции с указанием временных меток.


---

## Установка и запуск

### 1. Требования

Перед началом установки убедитесь, что у вас установлен **Python 3.11**. Для проверки версии Python выполните команду:
```cmd
python --version
```

Если Python 3.11 не установлен, скачайте его с официального сайта: [https://www.python.org/downloads/](https://www.python.org/downloads/).

#### Рекомендация для ускорения обработки:
Для ускорения работы модели Whisper рекомендуется установить **CUDA**, если у вас есть compatible NVIDIA GPU. Это позволит использовать графический процессор для обработки аудио. Подробнее о требованиях к системе и установке CUDA можно узнать здесь: [https://developer.nvidia.com/cuda-downloads](https://developer.nvidia.com/cuda-downloads).

После установки CUDA выполните следующую команду для установки PyTorch с поддержкой GPU:
```cmd
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

> *Примечание*: Если у вас нет совместимой видеокарты NVIDIA или вы не хотите использовать CUDA, установите CPU-версию PyTorch:
> ```cmd
> pip install torch torchvision torchaudio
> ```

---

### 2. Установка зависимостей

Для корректной работы сервиса необходимо установить следующие компоненты:

#### a) Установка `whisper` и связанных библиотек
```cmd
pip install -U openai-whisper
```

#### b) Установка `ffmpeg`
```cmd
scoop install ffmpeg
```

> *Примечание*: Если у вас нет `scoop`, вы можете использовать другой способ установки `ffmpeg` (например, через официальный сайт или диспетчер пакетов вашей операционной системы).

#### c) Установка `setuptools-rust`
```cmd
pip install setuptools-rust
```

#### d) Создание файла `.env`
Создайте файл `.env` в корне проекта и добавьте в него переменную `giga_token` с вашим токеном для доступа к GigaChat:
```
giga_token=YOUR_GIGACHAT_TOKEN_HERE
```

#### e) Установка остальных зависимостей
Убедитесь, что в проекте есть файл `requirements.txt`, и установите все необходимые библиотеки командой:
```cmd
pip install -r requirements.txt
```

---

### 3. Запуск сервиса

Для запуска веб-сервиса выполните следующую команду из корня проекта:
```cmd
uvicorn src.main:app --reload
```

После успешного запуска, откройте браузер и перейдите по адресу:
```
http://127.0.0.1:8000/
```

---

## Как работает сервис?

1. Пользователь предоставляет ссылку на комнату лекции с платформы BBB.
2. Сервис получает список записей комнаты и предоставляет пользователю выбор.
3. Аудио обрабатывается с помощью технологии whisper для получения текстового представления.
4. Текст анализируется ИИ для выделения ключевых моментов и формирования аннотации.
5. Результат сохраняется в виде PDF-файла, который можно скачать.

---

## Технологический стек

- **Backend**: Python (FastAPI)
- **Модели recognition**: Whisper (OpenAI)
- **NLP**: GigaChat API
- **Формирование PDF**: Библиотеки для работы с PDF (fpdf)
- **Аудиообработка**: FFmpeg
- **Ускорение обработки**: CUDA (опционально)

---

## Возможные доработки

- Добавление поддержки других платформ для записи лекций.
- Улучшение интерфейса пользователя.
- Интеграция с облачными хранилищами для автоматического сохранения конспектов.
- Добавление обработки видео пользователя

---

## Лицензия

Проект распространяется под лицензией [Apache License](LICENSE).

---


### @Команда "cucumberы" 
